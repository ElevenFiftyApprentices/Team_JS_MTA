<section>
  <div class="page-header">
    <div class="row">
    <h1 ng-bind="vm.shoppinglist.name"></h1>
    <div class="pull-right"
       ng-show="vm.shoppinglist.isCurrentUserOwner">
    <a class="btn btn-primary"
       ui-sref="shoppinglists.edit({ shoppinglistId: vm.shoppinglist._id })">
      <i class="glyphicon glyphicon-edit"></i>
    </a>
    <a class="btn btn-danger" ng-click="vm.remove()">
      <i class="glyphicon glyphicon-trash"></i>
    </a>
  </div>
  </div>
    <small>
    <em class="text-muted" style="color: black">
      Posted on
      <span ng-bind="vm.shoppinglist.created | date:'mediumDate'"></span>
      by
      <span ng-if="vm.shoppinglist.user"
            ng-bind="vm.shoppinglist.user.displayName"></span>
      <span ng-if="!vm.shoppinglist.user">Deleted User</span>
    </em>
  </small>
  </div>
  <div style="color: {{vm.shoppinglist.color}} " >
    
    <table class="table" style="background: rgba(0,0,0,0.3); border-radius: 10px;">
    <thead>
      <tr ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()">

        <th class="glyphicon glyphicon-ok"></th>
        <th>Name</th>
        <th>Quantity</th>
        <th>Priority</th>
        <th>Options</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="item in vm.shoppinglist.items track by $index" >
        <td ng-switch="item.isChecked">
          <input ng-switch-when="true" type="checkbox" checked ng-model="item.isChecked" ng-change="vm.checkBox($index)">
          <input ng-switch-default type="checkbox" ng-model="item.isChecked" ng-change="vm.checkBox($index)">
        </td>

        <!-- <td><input type="checkbox" ng-model="shoppinglist.item.isChecked"></td> -->
        <td ng-switch="item.isChecked">
          <h4 ng-switch-when="true"><del>{{item.name}}</del><a ng-show="item.notes!==''" href="#" data-toggle="tooltip" title="{{item.notes}}"><i class="glyphicon glyphicon-info-sign"></i></a></h4>
          <h4 ng-switch-default>{{item.name}}<a ng-show="item.notes!==''" href="#" data-toggle="tooltip" title="{{item.notes}}"><i class="glyphicon glyphicon-info-sign"></i></a></h4>
        </td>
        <td ng-switch="item.isChecked">
          <h4 ng-switch-when="true"><del>{{item.priority}}</del></h4>
          <h4 ng-switch-default>{{item.quantity}}</h4>
        </td>
        <td ng-switch="item.isChecked">
          <h4 ng-switch-when="true"><del>{{item.quantity}}</del></h4>
          <h4 ng-switch-default>{{item.priority}}</h4>
        </td>
        <td>
          <a class="btn btn-primary" ng-click="vm.editRow($index)">
            <i class="glyphicon glyphicon-edit"></i>
          </a>
          <a class="btn btn-danger" ng-click="vm.deleteRow($index)">
            <i class="glyphicon glyphicon-trash"></i>
          </a>
        </td>
      </tr>
    </tbody>
    </table>

    <div class="col-md-12" style="background: rgba(0,0,0,0.3); border-radius: 10px;">
      <form name="vm.form.shoppingListItemsForm" ng-submit="vm.addItem(vm.form.shoppingListItemsForm.$valid)" class="form-horizontal" novalidate >
      <br />
      <div class="form-group">
        <div class="col-md-6">

          <input type="text" name="name" ng-model="vm.shoppinglist.item.name" placeholder="Item" class="form-control" required>
            <br />
        </div>
        <div class="col-md-12">
           <div class="form-group col-md-3" style="margin-right:30px">
              <input list="priorities" name="priority" ng-model="vm.shoppinglist.item.priority" placeholder="Priority" class="form-control">
              <datalist id="priorities">
                <option>High</option>
                <option>Medium</option>
                <option>Low</option>
              </datalist>
            </div>
            <div class="form-group col-md-3 col-md-offset-1">
              
              <input type="number" name="quantity" placeholder="Quantity" class="form-control" ng-model="vm.shoppinglist.item.quantity">
            </div>
        
        <input type="text" placeholder="Add Notes" class="form-control" ng-model="vm.shoppinglist.item.notes"></input>
        <br>
        <div class="form-group col-md-12">
         <button type="submit" class="btn btn-default">Add</button>
        </div>
        </div>
      </div>
      </form>
    </div>

  </div>
  
  
  <p class="lead" ng-bind="vm.shoppinglist.content"></p>
  <script type="text/javascript">
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip(); 
    });
  </script>
</section>
